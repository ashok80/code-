{% extends 'tabledata/base.html' %}

{% load static %}
{% load crispy_forms_tags %}



{% block priorityjs %}
<script src="{% static 'js/jquery.formset.js' %}" type="text/javascript"></script>
{% endblock %}

{% block content %}
<br><br>
<div class="text-center alert alert-primary" role="alert">
	Code Map
</div>
<br><br>
<a href="{% url 'add-code-map' %}" class="btn btn-primary pull-right">Add &nbsp;&nbsp;<i class="fas fa-plus"></i></a>
<br><br>

<div class="row">
	<div style='background-color: grey;' class="col-2">
		<strong>Type</strong>
		<ul>
			{% for row in rows %}
			<li><a href="#" onclick="show_type_specific({{row.code_map_id}})">{{row.type}}</a></li>
			{% endfor %}
		</ul>
		<strong>Display Label</strong>
		<ul>
			{% for row in rows %}
			<li><a href="#" onclick="show_display_specific({{row.code_map_id}})">{{row.display_label}}</a></li>
			{% endfor %}
		</ul>
	</div>
	<div class="w-100 col-4">
        <table class="table table-bordered">
            <tr>
                <th>Index</th>
                <th>Type</th>
                <th>Input Value</th>
                <th>Output Value</th>
                <th>Display Label</th>
            </tr>
            <tbody class='table-body'>
            {% for row in rows %}
                <tr>
                    <td>{{forloop.counter}}</td>
                    <td>{{row.type}}</td>
                    <td>{{row.input_value}}</td>
                    <td>{{row.output_value}}</td>
                    <td>{{row.display_label}}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
	</div>
</div>
{% endblock %}

{% block extrajs %}
<script type="text/javascript">
function show_type_specific(id){
    var rows = $(".table").rows.length;
}

function show_display_specific(id){
    if (id == 1){
        $(".table").find(`tr:lt(${id})`).remove();
    }else{
        $(".table").find(`tr:gt(${id})`).remove();
    }
}

</script>
{% endblock %}
